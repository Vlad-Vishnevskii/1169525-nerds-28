var buttonWrite=document.querySelector(".btn-write"),popupWrite=document.querySelector(".popap"),popupClose=popupWrite.querySelector(".modal-close"),popapForm=popupWrite.querySelector(".popap-form"),userName=popupWrite.querySelector(".user-name"),email=popupWrite.querySelector(".email-field"),popapMessage=popupWrite.querySelector(".message"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}buttonWrite.addEventListener("click",function(e){e.preventDefault(),popupWrite.classList.add("popap-show"),storage?(userName.value=storage,email.value=localStorage.getItem("email"),popapMessage.focus()):userName.focus()}),popupClose.addEventListener("click",function(e){e.preventDefault(),popupWrite.classList.remove("popap-show"),popupWrite.classList.remove("popap-error")}),popapForm.addEventListener("submit",function(e){userName.value&&email.value&&popapMessage.value?isStorageSupport&&(localStorage.setItem("login",userName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popupWrite.classList.remove("popap-error"),popupWrite.offsetWidth,popupWrite.classList.add("popap-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupWrite.classList.contains("popap-show")&&(e.preventDefault(),popupWrite.classList.remove("popap-show"),popupWrite.classList.remove("popap-error"))});
